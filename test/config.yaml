$select:
  useCustomLibrary:
    -*: false
    -ios: true
$:
  graphicsLib:
    -*: opengl
    -win: directx
  targets:
    -mac, linux:
      device:
        arch: x64
        endianness: LE
    -ios !linux:
      device:
        arch: arm
        endianness: BE
      simulator:
        arch: x64
        endianness: LE
  host:
    ninja:
        version:
          -host-mac: 1.5.7
          -host-linux: 1.4
    compiler:
      -host-mac: clang
      -host-linux: gcc
build:
  $map:
    from: ${targets}
    to:
      ninja:
        fetch: http://ninja-v${host.ninja.version}.tar.gz
        cc: ${host.compiler}
      defines:
        $:
          LE: 4321
          BE: 1234
        TARGET_ENDIANNESS: ${${endianness}}
      cFlags:
        -production:
          wAll: true
          O: 3
        -debug:
          O: 0
      link:
        ${graphicsLib}: ${graphicsLib}
require:
  requiredLibrary: tmake/requiredLibrary
  -useCustomLibrary:
    customLibrary: tmake/customLibrary
